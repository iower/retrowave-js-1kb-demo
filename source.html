<body onload="
	sceneWidth = a.width = 1280;
	sceneHeight = a.height = 720;
	sceneSemiWidth = sceneWidth / 2;
	sceneSemiHeight = sceneHeight / 2;
	c = a.getContext(`2d`);
	beginPathAlias = () => c.beginPath();
	strokeAlias = () => c.stroke();
	lineToAlias = (x, y) => c.lineTo(x, y);
	fillStyleAlias = (s) => c.fillStyle = s;
	strokeStyleString = `strokeStyle`;
	full = 255;
	hundreed = 100;
	m = Math;
	
	rnd = (param1, param2 = 0) => param2 + m.random() * (param1 - param2);
	
	color = (r, g, b, a=1) => `rgba(${r},${g},${b},${a})`;
	
	r = (repeats, f) => { for (var j = 0; repeats > j; f(i=j++, n=repeats)); };
	
	rect = (x, y, w, h, style) =>
		c.fillRect(x, y, w, h, fillStyleAlias(style));
	
	drawLine = (x, y, a, b=y, style) =>
		strokeAlias(
		lineToAlias(a, b,
		c.moveTo(x, y,
		beginPathAlias(
		c[strokeStyleString] = style
		))))
	;
	
	
	// Darkness
	
	rect(0, 0, sceneWidth, sceneHeight, color(0, 0, 0));
	
	
	// Stars
	
	r(2e3, () =>
		rect(rnd(sceneWidth), rnd(sceneHeight), 2, 2, color(rnd(full), rnd(full), rnd(full), rnd(1)))
	);
	
	
	r(15, () => 
		
		
		// Sky gradient
		
		rect(0, sceneSemiHeight - n * i, sceneWidth, n, color(140, 60, 133, 1-i/n),
		
		
		// Sun
		
		c.fill(
		c.arc(sceneSemiWidth, sceneSemiHeight, 120 - i * 2, 0, 3, 1,
		beginPathAlias(
		fillStyleAlias(
		color(full, hundreed, 0, i / n)
		))))
		
		)
	);
	
	
	// Earth
	
	rect(0, sceneSemiHeight, sceneWidth, sceneSemiHeight, color(50, 0, 80));
	
	
	r(22, () =>
		
		// Horizontal ground grid lines
		drawLine(sceneSemiWidth, sceneSemiHeight, sceneWidth - sceneWidth / 21 * i, sceneHeight, color(hundreed, hundreed, full),
		
		// Road
		drawLine(0, sceneSemiHeight + m.pow(1.3, i), sceneWidth),
		
		
		// City
		rect(i * n + 400, sceneSemiHeight, rnd(14, 26), -rnd(14, 26), color(n, 0, 50))
		
		)
		
	);
	
	
	
	// Mountains
	
	mountain = (x1, x3) => {
		
		dotsX = [x1, (x1 + x3)/2, x3];
		dotsY = [sceneSemiHeight, sceneSemiHeight - hundreed, sceneSemiHeight];
		
		r(9, () =>
			
			r(dotsX.length - 1, () => {
				
				currentItem = n - i;
				
				takeNeighbourCoordinateOf = (coord1, coord2) => 
					// 5 - mountain edgeness
					(coord2 + coord1)/2 + rnd(-(coord2 - coord1)/5, (coord2 - coord1)/5);
				
				dotsX.splice(currentItem, 0, 
					takeNeighbourCoordinateOf(dotsX[currentItem-1], dotsX[currentItem]),
				);
				
				dotsY.splice(currentItem, 0, 
					takeNeighbourCoordinateOf(dotsY[currentItem-1], dotsY[currentItem]),
				);
				
			})
			
		);
		
		beginPathAlias(fillStyleAlias(c[strokeStyleString] = color(25, 0, 25)));
		
		r(dotsX.length, () => 
			lineToAlias(dotsX[i], dotsY[i])
		);
		
		c.fill(lineToAlias(dotsX[0], dotsY[0]));
	};
	
	mountain(sceneWidth * .6, sceneWidth * 1.2);
	mountain(sceneWidth * -.2, sceneWidth * .4);
	
	
	// Camera grid
	
	r(5, () => {
		
		period = 128 >> i;
		
		r(sceneWidth, () =>
			
			rect(i, 0, 1, sceneHeight,
			rect(0, i, sceneWidth, 1),
			fillStyleAlias(color(full, full, full, i % period / period * .014))
			)
			
		);
		
	});
	
	
	// Screenlines
	
	screenLines = (period, gap, opacity) => 
		r(sceneHeight/period, () => 
			rect(0, i * period, sceneWidth, gap, color(full, full, full, opacity)
		)
	);
	
	
	screenLines(5, 2, .08);
	screenLines(23, 9, .05);
	
	
	// ScreenCorners
	
	r(300, () =>
		rect(0, sceneHeight - i, sceneWidth, 1, 
		fillStyleAlias(color(0, 0, 0, (1-i/n)*.4)),
		rect(0, i, sceneWidth, 1),
		rect(sceneWidth - i, 0, 1, sceneHeight),
		rect(i, 0, 1, sceneHeight)
		)
	)
	
"><canvas id=a>